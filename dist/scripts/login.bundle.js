webpackJsonp([2],{0:function(i,exports,t){(function($){function i(){$.AMUI.progress.set(.8),o.button("loading")}function e(){$.AMUI.progress.done(),o.button("reset")}var r=t(2);t(3),t(13);var n=t(18),s={};$.post(r.URL.RSA_KEY).done(function(i){i&&i.content&&(s.exponent=i.content.e,s.modulus=i.content.n)}),$("#toast").on("opened.modal.amui",function(){setTimeout(function(){$(this).modal("close")}.bind(this),1e3)}),$("#username").on("change",function(){var i=$(this);i.val($.trim(i.val()).toUpperCase())}),$("#validateCodeDiv").on("click","a",function(){var i=$(this).prev()[0];i.src=r.URL.VALIDATA_IMG+"?"+Math.random()});var o=$("#loginBtn");$("#loginForm").submit(function(t){t.preventDefault();var o=$("#username"),g=$("#password"),d=$("#validateCode"),a=$.trim(g.val()),u=$.trim(o.val()),l=$.trim(d.val());if(""===u)$("#toast-cnt").html("请填写用户名"),$("#toast").modal("open");else if(""===a)$("#toast-cnt").html("请填写密码"),$("#toast").modal("open");else if($("#validateCodeDiv").is(":visible")&&""===l)$("#toast-cnt").html("请填写验证码"),$("#toast").modal("open");else{i();var b=$(this);if(s.exponent&&s.modulus){var h=n.getKeyPair(s.exponent,"",s.modulus),f=n.encryptedString(h,a);g.val(f)}$.post(r.URL.LOGIN,b.serializeArray()).done(function(i){i&&"success"===i.status?(s.sessionid=i.content.sessionid,s.firstLogin=i.content.firstLogin,r.storage.set("ceis",s.sessionid),s.firstLogin?($("#toast-cnt").html("首次登陆或密码过期，请修改密码！"),$("#toast").modal("open"),r.forward("./modifypwd.html")):($("#toast-cnt").html("登录成功！"),$("#toast").modal("open"),r.forward("./index.html"))):(g.val(""),$("#toast-cnt").html(i.msg),$("#toast").modal("open"),e(),i.content&&"org.apache.shiro.authc.AuthenticationException"==i.content.shiroLoginFailure&&$("#validateCodeDiv").show(),$("#validateCodeDiv a").click())}).always(function(i){e()})}})}).call(exports,t(1))},13:function(i,exports){},18:function(t,exports){function e(i){var t=a,e=t.biDivideByRadixPower(i,this.k-1),r=t.biMultiply(e,this.mu),n=t.biDivideByRadixPower(r,this.k+1),s=t.biModuloByRadixPower(i,this.k+1),o=t.biMultiply(n,this.modulus),g=t.biModuloByRadixPower(o,this.k+1),d=t.biSubtract(s,g);d.isNeg&&(d=t.biAdd(d,this.bkplus1));for(var u=t.biCompare(d,this.modulus)>=0;u;)d=t.biSubtract(d,this.modulus),u=t.biCompare(d,this.modulus)>=0;return d}function r(i,t){var e=a.biMultiply(i,t);return this.modulo(e)}function n(i,t){var e=new v;e.digits[0]=1;for(var r=i,n=t;;){if(0!=(1&n.digits[0])&&(e=this.multiplyMod(e,r)),n=a.biShiftRight(n,1),0==n.digits[0]&&0==a.biHighIndex(n))break;r=this.multiplyMod(r,r)}return e}var s,o,g,d,a={},u=16,l=u,b=65536,h=b>>>1,f=b*b,c=b-1,v=v=function(i){"boolean"==typeof i&&1==i?this.digits=null:this.digits=o.slice(0),this.isNeg=!1};a.setMaxDigits=function(i){s=i,o=new Array(s);for(var t=0;t<o.length;t++)o[t]=0;g=new v,d=new v,d.digits[0]=1},a.setMaxDigits(20);var m=15;a.biFromNumber=function(i){var t=new v;t.isNeg=0>i,i=Math.abs(i);for(var e=0;i>0;)t.digits[e++]=i&c,i=Math.floor(i/b);return t};var p=a.biFromNumber(1e15);a.biFromDecimal=function(i){for(var t,e="-"==i.charAt(0),r=e?1:0;r<i.length&&"0"==i.charAt(r);)++r;if(r==i.length)t=new v;else{var n=i.length-r,s=n%m;for(0==s&&(s=m),t=a.biFromNumber(Number(i.substr(r,s))),r+=s;r<i.length;)t=a.biAdd(a.biMultiply(t,p),a.biFromNumber(Number(i.substr(r,m)))),r+=m;t.isNeg=e}return t},a.biCopy=function(i){var t=new v(!0);return t.digits=i.digits.slice(0),t.isNeg=i.isNeg,t},a.reverseStr=function(i){for(var t="",e=i.length-1;e>-1;--e)t+=i.charAt(e);return t};var N=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];a.biToString=function(i,t){var e=new v;e.digits[0]=t;for(var r=a.biDivideModulo(i,e),n=N[r[1].digits[0]];1==a.biCompare(r[0],g);)r=a.biDivideModulo(r[0],e),digit=r[1].digits[0],n+=N[r[1].digits[0]];return(i.isNeg?"-":"")+a.reverseStr(n)},a.biToDecimal=function(i){var t=new v;t.digits[0]=10;for(var e=a.biDivideModulo(i,t),r=String(e[1].digits[0]);1==a.biCompare(e[0],g);)e=a.biDivideModulo(e[0],t),r+=String(e[1].digits[0]);return(i.isNeg?"-":"")+a.reverseStr(r)};var M=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];a.digitToHex=function(t){var e=15,r="";for(i=0;i<4;++i)r+=M[t&e],t>>>=4;return a.reverseStr(r)},a.biToHex=function(i){for(var t="",e=(a.biHighIndex(i),a.biHighIndex(i));e>-1;--e)t+=a.digitToHex(i.digits[e]);return t},a.charToHex=function(i){var t,e=48,r=e+9,n=97,s=n+25,o=65,g=90;return t=i>=e&&r>=i?i-e:i>=o&&g>=i?10+i-o:i>=n&&s>=i?10+i-n:0},a.hexToDigit=function(i){for(var t=0,e=Math.min(i.length,4),r=0;e>r;++r)t<<=4,t|=a.charToHex(i.charCodeAt(r));return t},a.biFromHex=function(i){for(var t=new v,e=i.length,r=e,n=0;r>0;r-=4,++n)t.digits[n]=a.hexToDigit(i.substr(Math.max(r-4,0),Math.min(r,4)));return t},a.biFromString=function(i,t){var e="-"==i.charAt(0),r=e?1:0,n=new v,s=new v;s.digits[0]=1;for(var o=i.length-1;o>=r;o--){var g=i.charCodeAt(o),d=a.charToHex(g),u=a.biMultiplyDigit(s,d);n=a.biAdd(n,u),s=a.biMultiplyDigit(s,t)}return n.isNeg=e,n},a.biDump=function(i){return(i.isNeg?"-":"")+i.digits.join(" ")},a.biAdd=function(i,t){var e;if(i.isNeg!=t.isNeg)t.isNeg=!t.isNeg,e=a.biSubtract(i,t),t.isNeg=!t.isNeg;else{e=new v;for(var r,n=0,s=0;s<i.digits.length;++s)r=i.digits[s]+t.digits[s]+n,e.digits[s]=r%b,n=Number(r>=b);e.isNeg=i.isNeg}return e},a.biSubtract=function(i,t){var e;if(i.isNeg!=t.isNeg)t.isNeg=!t.isNeg,e=a.biAdd(i,t),t.isNeg=!t.isNeg;else{e=new v;var r,n;n=0;for(var s=0;s<i.digits.length;++s)r=i.digits[s]-t.digits[s]+n,e.digits[s]=r%b,e.digits[s]<0&&(e.digits[s]+=b),n=0-Number(0>r);if(-1==n){n=0;for(var s=0;s<i.digits.length;++s)r=0-e.digits[s]+n,e.digits[s]=r%b,e.digits[s]<0&&(e.digits[s]+=b),n=0-Number(0>r);e.isNeg=!i.isNeg}else e.isNeg=i.isNeg}return e},a.biHighIndex=function(i){for(var t=i.digits.length-1;t>0&&0==i.digits[t];)--t;return t},a.biNumBits=function(i){var t,e=a.biHighIndex(i),r=i.digits[e],n=(e+1)*l;for(t=n;t>n-l&&0==(32768&r);--t)r<<=1;return t},a.biMultiply=function(i,t){for(var e,r,n,s=new v,o=a.biHighIndex(i),g=a.biHighIndex(t),d=0;g>=d;++d){for(e=0,n=d,j=0;j<=o;++j,++n)r=s.digits[n]+i.digits[j]*t.digits[d]+e,s.digits[n]=r&c,e=r>>>u;s.digits[d+o+1]=e}return s.isNeg=i.isNeg!=t.isNeg,s},a.biMultiplyDigit=function(i,t){var e,r,n;result=new v,e=a.biHighIndex(i),r=0;for(var s=0;e>=s;++s)n=result.digits[s]+i.digits[s]*t+r,result.digits[s]=n&c,r=n>>>u;return result.digits[1+e]=r,result},a.arrayCopy=function(i,t,e,r,n){for(var s=Math.min(t+n,i.length),o=t,g=r;s>o;++o,++g)e[g]=i[o]};var y=[0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535];a.biShiftLeft=function(i,t){var e=Math.floor(t/l),r=new v;a.arrayCopy(i.digits,0,r.digits,e,r.digits.length-e);for(var n=t%l,s=l-n,o=r.digits.length-1,g=o-1;o>0;--o,--g)r.digits[o]=r.digits[o]<<n&c|(r.digits[g]&y[n])>>>s;return r.digits[0]=r.digits[o]<<n&c,r.isNeg=i.isNeg,r};var w=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];a.biShiftRight=function(i,t){var e=Math.floor(t/l),r=new v;a.arrayCopy(i.digits,e,r.digits,0,i.digits.length-e);for(var n=t%l,s=l-n,o=0,g=o+1;o<r.digits.length-1;++o,++g)r.digits[o]=r.digits[o]>>>n|(r.digits[g]&w[n])<<s;return r.digits[r.digits.length-1]>>>=n,r.isNeg=i.isNeg,r},a.biMultiplyByRadixPower=function(i,t){var e=new v;return a.arrayCopy(i.digits,0,e.digits,t,e.digits.length-t),e},a.biDivideByRadixPower=function(i,t){var e=new v;return a.arrayCopy(i.digits,t,e.digits,0,e.digits.length-t),e},a.biModuloByRadixPower=function(i,t){var e=new v;return a.arrayCopy(i.digits,0,e.digits,0,t),e},a.biCompare=function(i,t){if(i.isNeg!=t.isNeg)return 1-2*Number(i.isNeg);for(var e=i.digits.length-1;e>=0;--e)if(i.digits[e]!=t.digits[e])return i.isNeg?1-2*Number(i.digits[e]>t.digits[e]):1-2*Number(i.digits[e]<t.digits[e]);return 0},a.biDivideModulo=function(i,t){var e,r,n=a.biNumBits(i),s=a.biNumBits(t),o=t.isNeg;if(s>n)return i.isNeg?(e=a.biCopy(d),e.isNeg=!t.isNeg,i.isNeg=!1,t.isNeg=!1,r=biSubtract(t,i),i.isNeg=!0,t.isNeg=o):(e=new v,r=a.biCopy(i)),[e,r];e=new v,r=i;for(var g=Math.ceil(s/l)-1,u=0;t.digits[g]<h;)t=a.biShiftLeft(t,1),++u,++s,g=Math.ceil(s/l)-1;r=a.biShiftLeft(r,u),n+=u;for(var m=Math.ceil(n/l)-1,p=a.biMultiplyByRadixPower(t,m-g);-1!=a.biCompare(r,p);)++e.digits[m-g],r=a.biSubtract(r,p);for(var N=m;N>g;--N){var M=N>=r.digits.length?0:r.digits[N],y=N-1>=r.digits.length?0:r.digits[N-1],w=N-2>=r.digits.length?0:r.digits[N-2],x=g>=t.digits.length?0:t.digits[g],S=g-1>=t.digits.length?0:t.digits[g-1];M==x?e.digits[N-g-1]=c:e.digits[N-g-1]=Math.floor((M*b+y)/x);for(var D=e.digits[N-g-1]*(x*b+S),C=M*f+(y*b+w);D>C;)--e.digits[N-g-1],D=e.digits[N-g-1]*(x*b|S),C=M*b*b+(y*b+w);p=a.biMultiplyByRadixPower(t,N-g-1),r=a.biSubtract(r,a.biMultiplyDigit(p,e.digits[N-g-1])),r.isNeg&&(r=a.biAdd(r,p),--e.digits[N-g-1])}return r=a.biShiftRight(r,u),e.isNeg=i.isNeg!=o,i.isNeg&&(e=o?a.biAdd(e,d):a.biSubtract(e,d),t=a.biShiftRight(t,u),r=a.biSubtract(t,r)),0==r.digits[0]&&0==a.biHighIndex(r)&&(r.isNeg=!1),[e,r]},a.biDivide=function(i,t){return a.biDivideModulo(i,t)[0]},a.biModulo=function(i,t){return a.biDivideModulo(i,t)[1]},a.biMultiplyMod=function(i,t,e){return a.biModulo(a.biMultiply(i,t),e)},a.biPow=function(i,t){for(var e=d,r=i;;){if(0!=(1&t)&&(e=a.biMultiply(e,r)),t>>=1,0==t)break;r=a.biMultiply(r,r)}return e},a.biPowMod=function(i,t,e){for(var r=d,n=i,s=t;;){if(0!=(1&s.digits[0])&&(r=a.biMultiplyMod(r,n,e)),s=a.biShiftRight(s,1),0==s.digits[0]&&0==a.biHighIndex(s))break;n=a.biMultiplyMod(n,n,e)}return r},BarrettMu=function(i){this.modulus=a.biCopy(i),this.k=a.biHighIndex(this.modulus)+1;var t=new v;t.digits[2*this.k]=1,this.mu=a.biDivide(t,this.modulus),this.bkplus1=new v,this.bkplus1.digits[this.k+1]=1,this.modulo=e,this.multiplyMod=r,this.powMod=n};var x=function(i,t,e){var r=a;this.e=r.biFromHex(i),this.d=r.biFromHex(t),this.m=r.biFromHex(e),this.chunkSize=2*r.biHighIndex(this.m),this.radix=16,this.barrett=new BarrettMu(this.m)};a.getKeyPair=function(i,t,e){return new x(i,t,e)},"undefined"==typeof twoDigit&&(twoDigit=function(i){return(10>i?"0":"")+String(i)}),a.encryptedString=function(i,t){for(var e=[],r=t.length,n=0;r>n;)e[n]=t.charCodeAt(n),n++;for(;e.length%i.chunkSize!=0;)e[n++]=0;var s,o,g,d=e.length,u="";for(n=0;d>n;n+=i.chunkSize){for(g=new v,s=0,o=n;o<n+i.chunkSize;++s)g.digits[s]=e[o++],g.digits[s]+=e[o++]<<8;var l=i.barrett.powMod(g,i.e),b=16==i.radix?a.biToHex(l):a.biToString(l,i.radix);u+=b+" "}return u.substring(0,u.length-1)},a.decryptedString=function(i,t){var e,r,n,s=t.split(" "),o="";for(e=0;e<s.length;++e){var g;for(g=16==i.radix?a.biFromHex(s[e]):a.biFromString(s[e],i.radix),n=i.barrett.powMod(g,i.d),r=0;r<=a.biHighIndex(n);++r)o+=String.fromCharCode(255&n.digits[r],n.digits[r]>>8)}return 0==o.charCodeAt(o.length-1)&&(o=o.substring(0,o.length-1)),o},a.setMaxDigits(130),t.exports=a}});
//# sourceMappingURL=login.bundle.js.map