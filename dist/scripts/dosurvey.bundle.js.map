{"version":3,"sources":["webpack:///scripts/dosurvey.bundle.js","webpack:///./src/app/components/dosurvey/dosurvey.js"],"names":["webpackJsonp","module","exports","__webpack_require__","$","displayImages","input","zoom","fileNames","each","files","ResizeImageFile","this","dataURL","append","file","maxWidth","maxHeight","callback","Img","Image","canvas","document","createElement","ctx","getContext","window","URL","webkitURL","onload","width","height","maxRatio","Math","max","drawImage","toDataURL","src","createObjectURL","err","ex","console","error","message","on","call"],"mappings":"AAAAA,cAAc,IAER,SAASC,EAAQC,QAASC,IAEH,SAASC,GCQtC,QAAAC,GAAAC,EAAAC,GACA,GAAAC,GAAA,EACAJ,GAAAK,KAAAH,EAAAI,MAAA,WACAC,EAAAC,KAAA,eAAAC,GACAL,EAAA,oCAAAK,EAAA,aACAT,EAAAG,GAAAO,OAAAN,OAKA,QAAAG,GAAAI,EAAAC,EAAAC,EAAAC,GACA,GAAAC,GAAA,GAAAC,OACAC,EAAAC,SAAAC,cAAA,UACAC,EAAAH,EAAAI,WAAA,KAEAC,QAAAC,KAAAD,OAAAE,SAGAT,GAAAU,OAAA,WACA,GAAAV,EAAAW,MAAAd,GAAAG,EAAAY,OAAAd,EAAA,CAEA,GAAAe,GAAAC,KAAAC,IAAAf,EAAAW,MAAAd,EAAAG,EAAAY,OAAAd,EAEAI,GAAAS,MAAAX,EAAAW,MAAAE,EACAX,EAAAU,OAAAZ,EAAAY,OAAAC,MAGAX,GAAAS,MAAAX,EAAAW,MACAT,EAAAU,OAAAZ,EAAAY,MAGAP,GAAAW,UAAAhB,EAAA,IAAAA,EAAAW,MAAAX,EAAAY,OAAA,IAAAV,EAAAS,MAAAT,EAAAU,QAIAb,EAAAG,EAAAe,aAGA,KACAjB,EAAAkB,IAAAV,IAAAW,gBAAAvB,GAEA,MAAAwB,GACA,IACApB,EAAAkB,IAAAX,OAAAE,UAAAU,gBAAAvB,GAEA,MAAAyB,GACAC,QAAAC,MAAAF,EAAAG,WAzDAxC,EAAA,EACAA,GAAA,GAEAC,EAAA,aAAAwC,GAAA,oBACAvC,EAAAO,KAAA,sBAGAR,EAAA,eAAAwC,GAAA,oBACAvC,EAAAO,KAAA,0BD0D8BiC,KAAK3C,QAASC,EAAoB","file":"./scripts/dosurvey.bundle.js","sourcesContent":["webpackJsonp([7],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {\r\n\tvar Utils = __webpack_require__(3)\r\n\t__webpack_require__(2)\r\n\t\r\n\t$('#up-house').on('change', function() {\r\n\t  displayImages(this, '#file-list-house')\r\n\t});\r\n\t\r\n\t$('#up-address').on('change', function() {\r\n\t  displayImages(this, '#file-list-address')\r\n\t});\r\n\t\r\n\tfunction displayImages(input, zoom) {\r\n\t  var fileNames = ''\r\n\t  $.each(input.files, function() {\r\n\t    ResizeImageFile(this, 40, 40, function(dataURL) {\r\n\t      fileNames = '<span class=\"am-badge\"><img src=\"' + dataURL + '\"></span> '\r\n\t      $(zoom).append(fileNames)\r\n\t    })\r\n\t  })\r\n\t}\r\n\t\r\n\tfunction ResizeImageFile(file, maxWidth, maxHeight, callback) {\r\n\t\tvar Img = new Image();\r\n\t\tvar canvas = document.createElement('canvas');\r\n\t\tvar ctx = canvas.getContext('2d');\r\n\t\r\n\t\tvar urlCreator = window.URL || window.webkitURL;\r\n\t\t// dataURL = urlCreator.createObjectURL(blob);\r\n\t\r\n\t\tImg.onload = function() {\r\n\t\t\tif (Img.width > maxWidth || Img.height > maxHeight) {\r\n\t\t\t\t// eg: mw: 300, mh: 300. iw: 300, ih: 400.\r\n\t\t\t\tvar maxRatio = Math.max(Img.width/maxWidth, Img.height/maxHeight);\r\n\t\t\t\t// 除以最大比例，得到缩小比例\r\n\t\t\t\tcanvas.width = Img.width/maxRatio;\r\n\t\t\t\tcanvas.height = Img.height/maxRatio;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcanvas.width = Img.width;\r\n\t\t\t\tcanvas.height = Img.height;\r\n\t\t\t}\r\n\t\r\n\t\t\tctx.drawImage(Img, 0, 0, Img.width, Img.height, 0, 0, canvas.width, canvas.height);\r\n\t\r\n\t\t\t// $('body').append(canvas);\r\n\t\r\n\t\t\tcallback(canvas.toDataURL());\r\n\t\t};\r\n\t\r\n\t\ttry {\r\n\t\t\tImg.src = URL.createObjectURL(file);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\ttry {\r\n\t\t\t\tImg.src = window.webkitURL.createObjectURL(file);\r\n\t\t\t}\r\n\t\t\tcatch (ex) {\r\n\t\t\t\tconsole.error(ex.message);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** scripts/dosurvey.bundle.js\n **/","\r\nvar Utils = require('utils')\r\nrequire('../../common/common.scss')\r\n\r\n$('#up-house').on('change', function() {\r\n  displayImages(this, '#file-list-house')\r\n});\r\n\r\n$('#up-address').on('change', function() {\r\n  displayImages(this, '#file-list-address')\r\n});\r\n\r\nfunction displayImages(input, zoom) {\r\n  var fileNames = ''\r\n  $.each(input.files, function() {\r\n    ResizeImageFile(this, 40, 40, function(dataURL) {\r\n      fileNames = '<span class=\"am-badge\"><img src=\"' + dataURL + '\"></span> '\r\n      $(zoom).append(fileNames)\r\n    })\r\n  })\r\n}\r\n\r\nfunction ResizeImageFile(file, maxWidth, maxHeight, callback) {\r\n\tvar Img = new Image();\r\n\tvar canvas = document.createElement('canvas');\r\n\tvar ctx = canvas.getContext('2d');\r\n\r\n\tvar urlCreator = window.URL || window.webkitURL;\r\n\t// dataURL = urlCreator.createObjectURL(blob);\r\n\r\n\tImg.onload = function() {\r\n\t\tif (Img.width > maxWidth || Img.height > maxHeight) {\r\n\t\t\t// eg: mw: 300, mh: 300. iw: 300, ih: 400.\r\n\t\t\tvar maxRatio = Math.max(Img.width/maxWidth, Img.height/maxHeight);\r\n\t\t\t// 除以最大比例，得到缩小比例\r\n\t\t\tcanvas.width = Img.width/maxRatio;\r\n\t\t\tcanvas.height = Img.height/maxRatio;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcanvas.width = Img.width;\r\n\t\t\tcanvas.height = Img.height;\r\n\t\t}\r\n\r\n\t\tctx.drawImage(Img, 0, 0, Img.width, Img.height, 0, 0, canvas.width, canvas.height);\r\n\r\n\t\t// $('body').append(canvas);\r\n\r\n\t\tcallback(canvas.toDataURL());\r\n\t};\r\n\r\n\ttry {\r\n\t\tImg.src = URL.createObjectURL(file);\r\n\t}\r\n\tcatch(err) {\r\n\t\ttry {\r\n\t\t\tImg.src = window.webkitURL.createObjectURL(file);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tconsole.error(ex.message);\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/dosurvey/dosurvey.js\n ** module id = 0\n ** module chunks = 7\n **/"],"sourceRoot":""}