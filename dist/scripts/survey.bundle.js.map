{"version":3,"sources":["webpack:///scripts/survey.bundle.js","webpack:///./src/app/components/survey/survey.js","webpack:///./src/app/components/survey/pull.js"],"names":["webpackJsonp",0,"module","exports","__webpack_require__","$","Pull","AMUI","iScroll","pl","init","call",19,"Handlebars","PullDown","element","opions","$main","$list","find","$pullDown","$pullUp","topOffset","outerHeight","this","compiler","compile","html","renderList","start","type","_this","$el","data","setTimeout","children","first","before","append","refresh","resetLoading","scrollTo","utils","circular","setLoading","addClass","removeClass","pullStart","myScroll","click","pullFormTop","on","y","directionY","handlePullDown","handlePullUp","console","log"],"mappings":"AAAAA,cAAc,IAERC,EACA,SAASC,EAAQC,QAASC,IAEH,SAASC,GCJtCD,EAAA,EACAA,GAAA,EAEA,IAMAE,IANAD,EAAAE,KAAAC,QAMAJ,EAAA,KAEAK,EAAA,GAAAH,EAEAG,GAAAC,SDO8BC,KAAKR,QAASC,EAAoB,KAI1DQ,GACA,SAASV,EAAQC,QAASC,IE1BhC,SAAAC,EAAAQ,GAAA,GAAAC,GAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAZ,EAAA,YACAa,EAAAD,EAAAE,KAAA,gBACAC,EAAAH,EAAAE,KAAA,cAEAE,GADAJ,EAAAE,KAAA,oBACAF,EAAAE,KAAA,aACAG,GAAAF,EAAAG,aAGAC,MAAAC,SAAAZ,EAAAa,QAAArB,EAAA,kBAAAsB,QAIAH,KAAAI,WAAA,SAAAC,EAAAC,GACA,GAAAC,GAAAP,KACAQ,EAAAZ,CAEA,UAAAU,IACAE,EAAAX,EAGA,IAAAY,IAAA,sBAEAN,EAAAI,EAAAN,SAAAQ,EAEAC,YAAA,WACA,YAAAJ,EACAZ,EAAAiB,SAAA,MAAAC,QAAAC,OAAAV,GACO,SAAAG,EACPZ,EAAAoB,OAAAX,GAEAT,EAAAS,QAGAO,WAAA,WACAH,EAAAvB,QAAA+B,WACO,KAEPR,EAAAS,aAAAR,GAEA,SAAAF,GACAC,EAAAvB,QAAAiC,SAAA,EAAAnB,EAAA,IAAAjB,EAAAE,KAAAC,QAAAkC,MAAAC,WAGK,MAGLnB,KAAAoB,WAAA,SAAAZ,GACAA,EAAAa,SAAA,YAGArB,KAAAgB,aAAA,SAAAR,GACAA,EAAAc,YAAA,YAGAtB,KAAAd,KAAA,WACA,GAIAqC,GAJAC,EAAAxB,KAAAhB,QAAA,GAAAH,GAAAE,KAAAC,QAAA,YACAyC,OAAA,IAGAlB,EAAAP,KAAA0B,GAAA,CAEA1B,MAAAI,aAEAoB,EAAAG,GAAA,yBACA3B,KAAA4B,GAAA9B,IACA4B,GAAA,GAEAH,EAAAvB,KAAA4B,IAGAJ,EAAAG,GAAA,uBACAD,GAAA,KAAA1B,KAAA6B,YACAtB,EAAAuB,iBAEAJ,GAAA,EAEAH,IAAAvB,KAAA4B,GAAA,IAAA5B,KAAA6B,YACAtB,EAAAwB,iBAIA/B,KAAA8B,eAAA,WACAE,QAAAC,IAAA,oBACAjC,KAAAoB,WAAAxB,GACAI,KAAAI,WAAA,iBAGAJ,KAAA+B,aAAA,WACAC,QAAAC,IAAA,kBACAjC,KAAAoB,WAAAvB,GACAG,KAAAI,WAAA,eAKA1B,GAAAC,QAAAW,IF8B8BH,KAAKR,QAASC,EAAoB,GAAIA,EAAoB","file":"./scripts/survey.bundle.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($) {\r\n\tvar Utils = __webpack_require__(2)\r\n\t__webpack_require__(3)\r\n\t\r\n\tvar IScroll = $.AMUI.iScroll\r\n\t\r\n\t// var myScroll = new IScroll('#wrapper', {\r\n\t//   click: true\r\n\t// })\r\n\t\r\n\tvar Pull = __webpack_require__(19)\r\n\t\r\n\tvar pl = new Pull()\r\n\t\r\n\tpl.init()\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ },\n\n/***/ 19:\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function($, Handlebars) {var PullDown = function(element, opions) {\r\n\t  var $main = $('#wrapper')\r\n\t  var $list = $main.find('#events-list')\r\n\t  var $pullDown = $main.find('#pull-down')\r\n\t  var $pullDownLabel = $main.find('#pull-down-label')\r\n\t  var $pullUp = $main.find('#pull-up')\r\n\t  var topOffset = -$pullDown.outerHeight()\r\n\t\r\n\t  // this.compiler = require('./survey.hbs')\r\n\t  this.compiler = Handlebars.compile($('#tpi-list-item').html())\r\n\t  // this.prev = this.next = this.start = options.params.start\r\n\t  // this.total = null\r\n\t\r\n\t  this.renderList = function(start, type) {\r\n\t    var _this = this\r\n\t    var $el = $pullDown\r\n\t\r\n\t    if (type === 'load') {\r\n\t      $el = $pullUp\r\n\t    }\r\n\t\r\n\t    var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\t\r\n\t    var html = _this.compiler(data)\r\n\t\r\n\t    setTimeout(function() {\r\n\t      if (type === 'refresh') {\r\n\t        $list.children('li').first().before(html)\r\n\t      } else if (type === 'load') {\r\n\t        $list.append(html)\r\n\t      } else {\r\n\t        $list.html(html)\r\n\t      }\r\n\t\r\n\t      setTimeout(function() {\r\n\t        _this.iScroll.refresh()\r\n\t      }, 100)\r\n\t\r\n\t      _this.resetLoading($el)\r\n\t\r\n\t      if (type !== 'load') {\r\n\t        _this.iScroll.scrollTo(0, topOffset, 800, $.AMUI.iScroll.utils.circular)\r\n\t      }\r\n\t\r\n\t    }, 1000)\r\n\t  }\r\n\t\r\n\t  this.setLoading = function($el) {\r\n\t    $el.addClass('loading');\r\n\t  };\r\n\t\r\n\t  this.resetLoading = function($el) {\r\n\t    $el.removeClass('loading');\r\n\t  };\r\n\t\r\n\t  this.init = function() {\r\n\t    var myScroll = this.iScroll = new $.AMUI.iScroll('#wrapper', {\r\n\t      click: true\r\n\t    })\r\n\t\r\n\t    var _this = this, pullFormTop = false, pullStart\r\n\t\r\n\t    this.renderList()\r\n\t\r\n\t    myScroll.on('scrollStart', function() {\r\n\t      if (this.y >= topOffset) {\r\n\t        pullFormTop = true\r\n\t      }\r\n\t      pullStart = this.y\r\n\t    })\r\n\t\r\n\t    myScroll.on('scrollEnd', function() {\r\n\t      if (pullFormTop && this.directionY === -1) {\r\n\t        _this.handlePullDown()\r\n\t      }\r\n\t      pullFormTop = false;\r\n\t\r\n\t      if (pullStart === this.y && (this.directionY === 1)) {\r\n\t        _this.handlePullUp()\r\n\t      }\r\n\t    })\r\n\t\r\n\t    this.handlePullDown = function() {\r\n\t      console.log('handle pull down')\r\n\t      this.setLoading($pullDown)\r\n\t      this.renderList(null, 'refresh')\r\n\t    }\r\n\t\r\n\t    this.handlePullUp = function() {\r\n\t      console.log('handle pull up')\r\n\t      this.setLoading($pullUp)\r\n\t      this.renderList(null, 'load')\r\n\t    }\r\n\t  }\r\n\t}\r\n\t\r\n\tmodule.exports = PullDown\r\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1), __webpack_require__(4)))\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** scripts/survey.bundle.js\n **/","\r\nvar Utils = require('utils')\r\nrequire('../../common/common.scss')\r\n\r\nvar IScroll = $.AMUI.iScroll\r\n\r\n// var myScroll = new IScroll('#wrapper', {\r\n//   click: true\r\n// })\r\n\r\nvar Pull = require('./pull.js')\r\n\r\nvar pl = new Pull()\r\n\r\npl.init()\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/survey/survey.js\n ** module id = 0\n ** module chunks = 3\n **/","var PullDown = function(element, opions) {\r\n  var $main = $('#wrapper')\r\n  var $list = $main.find('#events-list')\r\n  var $pullDown = $main.find('#pull-down')\r\n  var $pullDownLabel = $main.find('#pull-down-label')\r\n  var $pullUp = $main.find('#pull-up')\r\n  var topOffset = -$pullDown.outerHeight()\r\n\r\n  // this.compiler = require('./survey.hbs')\r\n  this.compiler = Handlebars.compile($('#tpi-list-item').html())\r\n  // this.prev = this.next = this.start = options.params.start\r\n  // this.total = null\r\n\r\n  this.renderList = function(start, type) {\r\n    var _this = this\r\n    var $el = $pullDown\r\n\r\n    if (type === 'load') {\r\n      $el = $pullUp\r\n    }\r\n\r\n    var data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\r\n    var html = _this.compiler(data)\r\n\r\n    setTimeout(function() {\r\n      if (type === 'refresh') {\r\n        $list.children('li').first().before(html)\r\n      } else if (type === 'load') {\r\n        $list.append(html)\r\n      } else {\r\n        $list.html(html)\r\n      }\r\n\r\n      setTimeout(function() {\r\n        _this.iScroll.refresh()\r\n      }, 100)\r\n\r\n      _this.resetLoading($el)\r\n\r\n      if (type !== 'load') {\r\n        _this.iScroll.scrollTo(0, topOffset, 800, $.AMUI.iScroll.utils.circular)\r\n      }\r\n\r\n    }, 1000)\r\n  }\r\n\r\n  this.setLoading = function($el) {\r\n    $el.addClass('loading');\r\n  };\r\n\r\n  this.resetLoading = function($el) {\r\n    $el.removeClass('loading');\r\n  };\r\n\r\n  this.init = function() {\r\n    var myScroll = this.iScroll = new $.AMUI.iScroll('#wrapper', {\r\n      click: true\r\n    })\r\n\r\n    var _this = this, pullFormTop = false, pullStart\r\n\r\n    this.renderList()\r\n\r\n    myScroll.on('scrollStart', function() {\r\n      if (this.y >= topOffset) {\r\n        pullFormTop = true\r\n      }\r\n      pullStart = this.y\r\n    })\r\n\r\n    myScroll.on('scrollEnd', function() {\r\n      if (pullFormTop && this.directionY === -1) {\r\n        _this.handlePullDown()\r\n      }\r\n      pullFormTop = false;\r\n\r\n      if (pullStart === this.y && (this.directionY === 1)) {\r\n        _this.handlePullUp()\r\n      }\r\n    })\r\n\r\n    this.handlePullDown = function() {\r\n      console.log('handle pull down')\r\n      this.setLoading($pullDown)\r\n      this.renderList(null, 'refresh')\r\n    }\r\n\r\n    this.handlePullUp = function() {\r\n      console.log('handle pull up')\r\n      this.setLoading($pullUp)\r\n      this.renderList(null, 'load')\r\n    }\r\n  }\r\n}\r\n\r\nmodule.exports = PullDown\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/app/components/survey/pull.js\n ** module id = 19\n ** module chunks = 3\n **/"],"sourceRoot":""}